% Inhaltsverzeichnis
\iftoggle{showtoc}{
  \hypersetup{linkcolor=black}
  \tableofcontents
}{} % Das leere {} ist der else-Teil, falls du nichts anderes möchtest

% Zähler auf section-Ebene setzen (bleibt bestehen, da es die Nummerierung beeinflusst, nicht nur die Anzeige des Verzeichnisses)
\counterwithin{figure}{section}
\counterwithin{oszillo}{section}
\counterwithin{diagram}{section}
\counterwithin{table}{section}


% Tabellenverzeichnis
\iftoggle{showtables}{
  \hypersetup{linkcolor=black}
  \listoftables
  \addcontentsline{toc}{section}{Tabellenverzeichnis}
  % \newpage % Newpage nur wenn das Verzeichnis tatsächlich gezeigt wird und du es wünschst
}{}

% Abbildungsverzeichnis
\iftoggle{showfigures}{
  \listoffigures
  \addcontentsline{toc}{section}{Abbildungsverzeichnis}
  %\newpage
}{}

% Oszillogrammverzeichnis
\iftoggle{showoszillos}{
  \listofoszillo
  \addcontentsline{toc}{section}{Oszillogrammverzeichnis}
  %\newpage
}{}

% Diagrammverzeichnis
\iftoggle{showdiagrams}{
  \listofdiagram
  \addcontentsline{toc}{section}{Diagrammverzeichnis}
}{} % Das \newpage hier habe ich erstmal in den if-Block verschoben, falls Diagramme das letzte Verzeichnis sind.

% Das \hypersetup und \newpage am Ende ggf. anpassen oder in den letzten aktiven Block verschieben.
% Wenn das Diagrammverzeichnis das letzte ist UND angezeigt wird:
\iftoggle{showdiagrams}{
  \hypersetup{linkcolor=blue}
  \newpage
}{}

% Wenn du eine generelle Regel für das letzte angezeigte Verzeichnis brauchst,
% könnte man das \hypersetup und \newpage außerhalb der Bedingungen setzen
% oder in den letzten Block, der sicher angezeigt wird (z.B. nach dem Diagrammverzeichnis,
% aber dann wird es immer ausgeführt, es sei denn, man macht eine komplexere Bedingung).
% Für den Moment ist es so, dass die Linkfarbe nur dann auf Blau gesetzt und eine neue Seite begonnen wird,
% wenn das Diagrammverzeichnis angezeigt wird. Du kannst das anpassen.
% Eine einfachere Variante für das Zurücksetzen der Linkfarbe (wenn mind. ein Verzeichnis angezeigt wurde):
% \hypersetup{linkcolor=blue}
% Wenn du immer eine neue Seite nach den Verzeichnissen willst (falls welche da waren):
% \newpage % Dies würde aber auch eine neue Seite machen, wenn alle Verzeichnisse aus sind.
